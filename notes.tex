\documentclass[10pt,a4paper]{article}
\input{packages}
\input{configuration}
\input{macros}

\title{Dimension functions: depth, measuring singularities}
\author{Pieter Belmans}
\date{February 14, 2014}

\begin{document}
\maketitle

\begin{abstract}
  These are the notes for my lecture on dimension functions in the ANAGRAMS seminar. The goal is to introduce the notion of \emph{depth}, and use this to study singularities.
\end{abstract}

\tableofcontents

\clearpage

\section{Definitions}
Before we start: let's try to motivate things a little. All rings will be commutative (strictly speaking not necessary, but we'll take algebraic geometry as main motivation) and unital. Let's for the ease of statement assume that they are noetherian too (!). Often we will be working with local rings, but whenever we do so we will be explicit about it.

We have seen \emph{Krull dimension} in a previous lecture, which was a measure of ``how big the ring is'', geometrically speaking: the Krull dimension of the ring~$A$ is equal to the dimension\footnote{It is a noetherian topological space, hence dimension is defined as the supremum over the lengths of descending chains of closed subsets. So they must agree, by the very definition of the Zariski topology.}. of the topological space~$\Spec A$

\subsection{Depth and regular sequences}
Another thing that we can study is the \emph{codimension} of an ideal~$I$ in~$A$. The question becomes: how does~$\Spec A/I$ relate to~$\Spec A$? As we have taken~$A$ noetherian we have that~$I$ is finitely generated. Is there a way of choosing the generators of~$I$ in such a way that we can deduce something interesting?
\begin{definition}
  Let~$A$ be a ring. Let~$M$ be a module over~$A$. A sequence of elements~$x_1,\dotsc,x_n$ in~$A$ is a \emph{regular sequence} on~$M$ if
  \begin{enumerate}
    \item $(x_1,\dotsc,x_n)M\neq M$;
    \item $x_i$ is a non-zerodivisor on~$M/(x_1,\dotsc,x_{i-1})M$ for all~$i=1,\dotsc,n$.
  \end{enumerate}
\end{definition}
\begin{example}
  Take~$A=k[x,y,z]$ with~$k$ a field. Take~$M=A$. Then the most classical regular sequence (if we wish to describe a point) would be
  \begin{equation}
    x,y,z.
  \end{equation}
  This one is a bit boring. Remark that we could also consider shorter regular sequences if one is interested in higher-dimensional results. Now let's look at:
  \begin{equation}
    x,y(1-x),z(1-x),
  \end{equation}
  which is a regular sequence:
  \begin{enumerate}
    \item we have~$1\notin(x,y(1-x),z(1-x))$;
    \item $x$ is not a zerodivisor in~$k[x,y,z]$, $y$ is not a zerodivisor in~$k[y,z]$ and~$z$ is not a zerodivisor in~$k[z]$.
  \end{enumerate}
  On the other hand,
  \begin{equation}
    y(1-x),z(1-x),x
  \end{equation}
  is not a regular sequence:
  \begin{enumerate}
    \item the ideal generated is the same as for the previous regular sequence, so the first condition is still satisfied;
    \item the condition fails already at the second step:
      \begin{equation}
        z(1-x)y=zy-zxy=zy-zy=0.
      \end{equation}
  \end{enumerate}
  Hence the order of the regular sequence is important\footnote{One can prove though that if an ideal is generated by some regular sequence, then we can find generators for this ideal such that they form a regular sequence for any permutation \cite[exercise 17.6]{eisenbud-commutative-algebra}. I haven't done this exercise, but one sees that taking the regular sequence~$x,y,z$ suffices in this case. The reader is invited to do the general exercise and tell me about it.}.
\end{example}
Fortunately, if we look at local rings, things are nicer \cite[corollary 17.2]{eisenbud-commutative-algebra}.
\begin{corollary}
  Let~$A$ be a local ring\footnote{Recall that all rings are noetherian. I won't repeat this from now on, but it's important to know this} with maximal ideal~$\mathfrak{m}$. If~$a_1,\dotsc,a_n$ is a regular sequence with~$a_i\in\mathfrak{m}$, then any permutation is again a regular sequence.
\end{corollary}
One now sees some analogy with the notion of a regular local ring.
\begin{definition}
  Let~$A$ be a local ring with maximal ideal~$\mathfrak{m}$. If~$\mathfrak{m}=(a_1,\dotsc,a_n)$ is a way of generating~$\mathfrak{m}$ with a minimal number of generators such that~$\dim A=n$, then~$A$ is \emph{regular}.
\end{definition}
So for every regular local ring of Krull dimension~$n$ we get a regular sequence of length~$n$.


\subsection{Cohen--Macaulay rings}
% depth measures the codimension using hypersurfaces for CM rings
% Krull dimension goes from bottom to top: point, curve, surface
% depth goes from top to bottom: intersecting hypersurfaces
% in some sense: difference between Weil (= Krull, although they are of course codimension 1) and Cartier (= depth) divisors

\subsection{Gorenstein rings}
To define the notion of a Gorenstein ring we will take the ``easier'' or ``modern'' definition that is used nowadays. In \cref{lemma:gorenstein-CM-relation} the equivalence with the classical definition will be discussed.

In the previous lecture we have seen homological dimensions for rings. If we consider a ring as a module over itself, its projective dimension is rather boring (a free module of rank one is a projective resolution of itself). In the case of injective dimension we get something interesting: a ring is rarely injective over itself. If the ring is reduced, being self-injective is equivalent to being~$0$\dash dimensional (in the Krull dimension sense).

\begin{definition}
  Let~$A$ be a local ring. Then~$A$ is \emph{Gorenstein} if~$A$ as an~$A$\dash module has finite injective dimension.
  
  Let~$A$ be a ring. Then~$A$ is \emph{Gorenstein} if the localisation~$A_{\mathfrak{p}}$ is Gorenstein for every~$\mathfrak{p}\in\Spec A$.
\end{definition}

We haven't argumented why having finite injective dimension is a reasonable thing to ask. That will be done when discussing the properties shortly.

\begin{remark}
  Gorenstein rings are named after Daniel Gorenstein, who introduced them in 1952 \cite{gorenstein-arithmetic-theory-adjoint-plane-curves} in the case of singular points curves. This zero-dimensional case was generalised later on by Bass \cite{bass-ubiquity-gorenstein-rings}, Grothendieck \cite{grothendieck-theoremes-de-dualite} (studying duality results, as discussed in a previous lecture series!) and Serre \cite{serre-sur-les-modules-projectifs}. Famously, Daniel Gorenstein used to say that he didn't understand the definition of a Gorenstein ring himself. He is mostly known for his great contributions to the classification of finite simple groups.
\end{remark}

\begin{enumerate}
  \item 
\end{enumerate}<++>


\section{Properties}
\subsection{Relations between regular, Gorenstein and Cohen--Macaulay rings}
% TODO discuss the three implications

\subsection{Complete intersections}
We now discuss an important class of Gorenstein rings.
\begin{definition}
  Let~$V$ be an algebraic variety inside~$\mathbb{P}_k^n$ such that~$\dim V=m$. Then~$V$ is a \emph{complete intersection} if the ideal describing~$V$ can be generated by exactly~$n-m$ elements (and no more).
\end{definition}
This means that~$V$ has the ``right'' codimension: each equation in the ideal describing~$V$ defines a hypersurface, the dimension can drop by at most~$1$. Hence we require that the hypersurfaces intersect eachother in such a way that the maximal codimension is achieved.
\begin{example}
  % some positive examples
\end{example}
\begin{example}
  The easiest example of a variety which is \emph{not} a complete intersection is the twisted cubic. It is the curve in~$\mathbb{P}_k^3$ given as the image of
  \begin{equation}
    \mathbb{P}_k^1\to\mathbb{P}_k^3:[s:t]\mapsto[s^3:s^2t:st^2:t^3].
  \end{equation}
  Hence locally on an affine chart it is~$(t,t^2,t^3)$ (up to some reordering). This curve is described by the (homogeneous) ideal
  \begin{equation}
    (xz-y^2,yw-z^2,xw-yz)
  \end{equation}
  in the graded ring~$k[x,y,z,w]$. So we need three (quadratic) equations, but we end up with a codimension~$1$ and not a codimension~$0$ subvariety.

  Set-theoretically speaking everything is nice: it is the intersection of the quadric surface~$xz-y^2=0$ and the cubic surface~$z(yw-z^2)-w(xw-yz)=0$. But ideal-theoretically speaking the twisted cubic should have degree~$3$ by a generalisation of the B\'ezout theorem, which is only possible if we intersect a plane with a cubic surface. This is not possible, as no four distinct points on the twisted cubic are coplanar, but if we intersect with a plane everything is coplanar.
\end{example}
Introducing this notion is interesting, because we have \cite[corollary 21.19]{eisenbud-commutative-algebra} (translating things to local rings instead of projective spaces):
\begin{theorem}
  \label{theorem:complete-intersections-are-Gorenstein}
  Let~$A$ be a regular local ring. If~$I$ is an ideal generated by a regular sequence (i.e.\ $A/I$ is a complete intersection) then~$A/I$ is Gorenstein.
\end{theorem}
The proof uses the fact that we have a Koszul resolution by the regular sequence, which is a minimal free resolution of~$A/I$. This gives us information on the highest Ext-group of~$A/I$ and~$A$, and by the relationship between dualising objects and Gorenstein rings \cite[theorem 21.15]{eisenbud-commutative-algebra} we get the result.


\subsection{Counterexamples}
So we have a hierarchy of being singular:
\begin{enumerate}
  \item regular (not singular at all);
  \item Gorenstein;
  \item Cohen--Macaulay.
\end{enumerate}
Moreover we have seen that each condition implies the one above it. Now we come to the counterexamples!

\paragraph{Gorenstein but not regular}
First some rings that are Gorenstein, but not regular.
\begin{example}
  As every complete intersection is Gorenstein by \cref{theorem:complete-intersections-are-gorenstein} it suffices to take a complete intersection which is not regular. Just taking a hypersurface that is singular suffices:~$k[x,y]/(x^2-y^3)$. This is a one-dimensional ring, with a mild singularity at the origin (so it is the local ring at the origin which is Gorenstein but not regular, all the others are of course regular).
  
  Or we could take~$k[x]/(x^2)$, which is a non-reduced point.
\end{example}
It is also interesting to have (non-regular) Gorenstein rings which are not complete intersections. To obtain one we have to do some effort, the following results severely limit the places where we can find examples:
\begin{enumerate}
  \item almost complete intersections (i.e.\ if the codimension of~$V$ is~$m$ then the defining ideal has a minimal set of generators of size~$m+1$) are never Gorenstein \addreference;
  \item in codimension 2 we have that being Gorenstein is equivalent to being a complete intersection \cite[corollary 21.20]{eisenbud-commutative-algebra};
  \item \ldots
\end{enumerate}
So to write down a possible example, we are (at least) required to start from~$k[x,y,z]$ (or its local version~$k[[x,y,z]]$) for codimension~$3$ to make sense, and we will need to have (at least) five defining equations (four would be an almost complete intersection, but oddly enough these are never Gorenstein).
\begin{example}
  
\end{example}
Now that we have seen a counterexample, we can discuss some other restrictions that we know, if one wishes to find more complicated examples:
\begin{enumerate}
  \item if the codimension~$c$ is~3 (e.g.\ as in the previous example) then the number of generators must be odd \cite{buchsbaum-eisenbud}, so we cannot find an example with six generators;
  \item if the codimension~$c$ is~$\geq 4$ we can find examples for any number of generators~$\geq c+2$, but some other restrictions apply.
\end{enumerate}

\paragraph{Cohen--Macaulay but not Gorenstein}

\begin{enumerate}
  \item in codimension 1 we have that Cohen--Macaulay is equivalent to Gorenstein \cite[corollary 21.20]{eisenbud-commutative-algebra};
\end{enumerate}

\paragraph{Not Cohen--Macaulay}
To find a ring that is not Cohen--Macaulay we can do several things. The following results tell us where to look:
\begin{enumerate}
  \item Cohen--Macaulay rings are universally catenary \cite[corollary 18.10]{eisenbud-commutative-algebra};
  \item Cohen--Macaulay rings are equidimensional \cite[corollary 18.11]{eisenbud-commutative-algebra};
  \item if~$A$ is Cohen--Macaulay, $I$ and~$J$ are proper ideals of~$A$ such that their radicals are incomparable \expand then~$\codim(I+J)\leq 1$, \cite[theorem 18.12]{eisenbud-commutative-algebra}.
\end{enumerate}
This first condition is virtually useless: rings that are not universally catenary are really hard to come up with. For an example, see \addreference{Stacks project}.

The second condition is more promising. Recall that being \emph{equidimensional} means that all the maximal ideals have the same codimension, and all minimal primes have the same dimension. For a local ring (without embedded components) this reduces to the geometric property of all irreducible components having the same dimension. So finding an example becomes easy.
\begin{example}
  The intersection of a plane and a line in a single point is not Cohen--Macaulay. At the singular point there are two minimal primes: one corresponding to the plane and one corresponding to the line. These don't have the same dimension, hence the ring is not Cohen--Macaulay.
\end{example}

The third condition is also interesting, and is related to what we will discuss in \cref{subsection:intersection-multiplicity}. Geometrically speaking we have to find a situation in which we have two things intersection eachother in a single point such that removing the point from the spectrum of the local ring makes the resulting topological space disconnected. As the codimension should be smaller than~$1$ we can interpret it this way: in this case 
\begin{example}
  Consider the intersection of two planes inside~$\mathbb{A}_k^4$, in a single point. This is possible (think linear algebra) and has a picture associated to it. If we remove the closed point in the local ring for the intersection we end up with two components which are disjoint, hence this ring cannot be Cohen--Macaulay.
\end{example}

\subsection{Some facts}
Without further ado, some random facts on the rings we have seen so far:
\begin{enumerate}
  \item $A$ is Cohen--Macaulay if and only if~$A[x]$ is Cohen--Macaulay \cite[proposition 18.9]{eisenbud-commutative-algebra};
  \item \ldots
\end{enumerate}


\subsection{Intersection multiplicity}
Cohen--Macaulay rings are the type of rings for which intersection multiplicity works.
\begin{example}
  \ldots
\end{example}


\subsection{Grothendieck duality}
During my lectures on Grothendieck duality I have often used the term ``mildly singular''. Depending on the context one has to think Gorenstein or Cohen--Macaulay when confronted with ``mildly singular''. Already in \cite{bass-ubiquity-gorenstein-rings} the link with Grothendieck duality is realised:
\begin{quote}
  The material of this paper seems to have connections with Grothendieck's Bourbaki expos\'e on duality theorems \cite{grothendieck-theoremes-de-dualite}, but which I am not competent to elaborate. Undoubtedly all of what follows is peripheral to the ideas of that paper.
\end{quote}
Recall that Grothendieck duality was concerned with the existence of a dualising complex \cite{hartshorne-residues-and-duality}, generalising the idea of duality of (finite-dimensional) vectorspaces. One of the main questions (besides its existence) are the properties of this dualising complex. If one knows something about how singular the scheme in question is we can get the answer, which is given in \cref{table:comparison-X-dualising-sheaf}.
\begin{table}[p]
  \centering
  \begin{tabular}{cc}
    \toprule
    how nice is $X$? & how nice is $\omega_X^\circ$? \\\midrule
    $X$ smooth & $\omega_X^\circ=\bigwedge^{\dim X}\Omega_X[\dim X]$ \\
    $X$ Gorenstein & $\omega_X^\circ$ shift of a line bundle by $\dim X$ \\
    $X$ Cohen--Macaulay & $\omega_X^\circ$ shift of a sheaf by $\dim X$ \\
    $X$ arbitrary & $\omega_X^\circ$ is a complex \\
    \bottomrule
  \end{tabular}
  \caption{Comparison of the singularities of $X$ and the look of $\omega_X^\circ$}
  \label{table:comparison-X-dualising-sheaf}
\end{table}
So to summarise:
\begin{enumerate}
  \item if $X$ is Gorenstein the dualising complex is as nice as the smooth case;
  \item if $X$ is Cohen--Macaulay we could build up the theory without derived categories to some extent, as is done in \cite{hartshorne-algebraic-geometry}.
\end{enumerate}
The rather unintuitive algebraic notions (from a geometric or topological point of view) of being Gorenstein or Cohen--Macaulay therefore have important implications in algebraic geometry!


\begin{enumerate}
  \item CM: Hartshorne's connectedness theorem (non-example: planes in P4)
  \item CM: equidimensional
  \item CM: preservation properties (polynomial rings, localisation, completion)
  \item Gorenstein: codimension versus complete intersection
  \item dimension arguments for Gorenstein (see 21.3)
  \item complete intersections are Gorenstein
  \item codimension 1: Gorenstein = CM = the ideal I for A=R/I with R regular is principal
  \item codimension 2: I has to be generated by a regular sequence
\end{enumerate}

\printbibliography

\end{document}
